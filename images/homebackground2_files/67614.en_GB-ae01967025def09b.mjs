"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[67614],{705533:(e,a,l)=>{var i;l.r(a),l.d(a,{default:()=>t});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DebugSignalsFeedback_pin",selections:[{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debAds",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"backgroundColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"iconUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"signalId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"signalMessage",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debContentQuality",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debInclusiveProduct",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debShopping",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debTrustAndSafety",plural:!0,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="06530ceab8fc1bb7b5d868c8ffeb2afd";let t=n},391014:(e,a,l)=>{l.r(a),l.d(a,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinCarouselData_pin",selections:[{args:null,kind:"FragmentSpread",name:"usePinDefaultCarouselData_pin"},{args:null,kind:"FragmentSpread",name:"usePinProductCarouselData_pin"}],type:"Pin",abstractKey:null};i.hash="461a57fcc8f7958e3742c217e4cc45a2";let n=i},860972:(e,a,l)=>{var i;l.r(a),l.d(a,{default:()=>t});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinDefaultCarouselData_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"slotId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="a3cbf6d55cf89d97d6e04c32195968d9";let t=n},902965:(e,a,l)=>{var i,n;l.r(a),l.d(a,{default:()=>s});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinProductCarouselData_pin",selections:[{alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:n=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"productId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"useRichPinProductMetadataCarouselSlots_richPinProductMetadata"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:n,storageKey:null}],type:"Pin",abstractKey:null};t.hash="6588018e2880f2695fc6c4ba45aab606";let s=t},965361:(e,a,l)=>{var i;l.r(a),l.d(a,{default:()=>t});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useRichPinProductMetadataCarouselSlots_richPinProductMetadata",selections:[{alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:i=[{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:i,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:i,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:i,storageKey:'additionalImagesPerSpec(spec:"736x")'}],type:"RichPinProductMetadata",abstractKey:null};n.hash="b49953855cdc69f6ee2c8d4925149d23";let t=n},343902:(e,a,l)=>{l.d(a,{N:()=>s,Z:()=>t});var i=l(883119),n=l(785893);function t({children:e,fullWidth:a}){return(0,n.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:a?"100%":void 0}},"data-test-id":"pointer-events-wrapper",children:e})}function s({children:e,enabled:a}){return a?(0,n.jsx)(t,{children:e}):e}},663056:(e,a,l)=>{l.d(a,{P:()=>g,Z:()=>u});var i,n,t,s,r=l(167912),d=l(807023),o=l(895409),c=l(333739);function u(e){let{childDataKey__DEPRECATED:a}=(0,d.Q)(void 0!==s?s:s=l(391014),e,{useLegacyAdapter:()=>({})}),u=function(e){let{data:a}=(0,d.Q)(void 0!==i?i:i=l(860972),e,{useLegacyAdapter:e=>({carouselData:e.carousel_data&&{entityId:e.carousel_data.id??"",index:e.carousel_data.index,carouselSlots:e.carousel_data.carousel_slots?.map(e=>({details:e.details,imageSignature:e.image_signature,image236x:e.images?.["236x"]&&{height:e.images["236x"].height,url:e.images["236x"].url,width:e.images["236x"].width},image474x:e.images?.["474x"]&&{height:e.images["474x"].height,url:e.images["474x"].url,width:e.images["474x"].width},image564x:e.images?.["564x"]&&{height:e.images["564x"].height,url:e.images["564x"].url,width:e.images["564x"].width},image736x:e.images?.["736x"]&&{height:e.images["736x"].height,url:e.images["736x"].url,width:e.images["736x"].width},slotId:e.id,title:e.title}))??[]}})});return a?.carouselData?{index:a.carouselData.index,carouselId:a.carouselData.entityId,carouselSlots:a.carouselData.carouselSlots?.map(({details:e,imageSignature:a,image236x:l,image474x:i,image564x:n,image736x:t,slotId:s,title:r})=>({details:e,imageSignature:a,imageSizeMap:[["236x",l],["474x",i],["564x",n],["736x",t]].reduce((e,[a,l])=>({...e,[a]:l}),{}),slotId:s,title:r}))??[]}:null}(a),g=function({pinKey:e,index:a}){let i;return i=null==e?{type:"deprecated",data:null}:"graphqlRef"===e.type?e:{type:"deprecated",data:e.data},(0,c.Zm)(void 0!==t?t:t=l(902965),i,{useGraphQLAdapter:e=>{let i=(e.richMetadata||e.richSummary)?.products?.[0],t=function(e){let a=(0,r.useFragment)(void 0!==n?n:n=l(965361),e);if(!a)return[];let i={},{image236x:t,image474x:s,image564x:d,image736x:o}=a;return[[t,"236x"],[s,"474x"],[d,"564x"],[o,"736x"]].forEach(([e,a])=>{(e??[]).forEach(({canonicalImage:e,imageSignature:l})=>{l&&e&&(i={...i,[l]:{...i[l],[a]:{height:e.height,url:e.url,width:e.width}}})})}),Object.entries(i).map(([e,a])=>({imageSignature:e,imageSizeMap:a}))}(i);return i&&t.length?{carouselId:i.productId,carouselSlots:[{imageSignature:null,imageSizeMap:[["236x",e.image236x],["474x",e.image474x],["564x",e.image564x],["736x",e.image736x]].reduce((e,[a,l])=>({...e,[a]:l&&{height:l.height,url:l.url,width:l.width}}),{})},...t],index:a}:null},useLegacyAdapter:e=>{let l=(e?.rich_metadata||e?.rich_summary)?.products?.[0],i=(l?.additional_images??[]).reduce((e,{canonical_images:a,image_signature:l})=>e.concat(a&&l?[{imageSignature:l,imageSizeMap:Object.keys(a).reduce((e,l)=>a[l]?{...e,[l]:{height:a[l].height,url:a[l].url,width:a[l].width}}:e,{})}]:[]),[]);return e&&l&&i.length?{carouselId:l.id,carouselSlots:[...e.images?[{imageSignature:null,imageSizeMap:(0,o.b)(e.images)}]:[],...i],index:a}:null}}).data}({pinKey:a,index:u?.index});return g?{...g,carouselSlots:g.carouselSlots.map(e=>({...e,details:null,slotId:null,title:null}))}:u}function g({children:e,pinKey:a}){return e(u(a))}},895409:(e,a,l)=>{l.d(a,{b:()=>n});let i=({height:e,url:a,width:l})=>({height:e,url:a,width:l}),n=e=>Object.entries(e).reduce((e,[a,l])=>({...e,[a]:l&&i(l)}),{})},807023:(e,a,l)=>{l.d(a,{Q:()=>s});var i=l(167912),n=l(91402),t=l(333739);function s(e,a,{useLegacyAdapter:l}){if(null==a)return{data:null,childDataKey__DEPRECATED:null};let s=(0,n.j)(a);if("deprecated"===s.type){let{data:a}=s;return null==a?{data:null,childDataKey__DEPRECATED:s}:{data:(0,t.V4)(e,l)(a),childDataKey__DEPRECATED:s}}let r=(0,i.useFragment)(e,s.data);return{data:r,childDataKey__DEPRECATED:{type:"graphqlRef",data:r}}}},213377:(e,a,l)=>{l.d(a,{$H:()=>s,$q:()=>y,D6:()=>o,KN:()=>b,Lo:()=>n,P2:()=>m,TS:()=>k,Wv:()=>f,ZZ:()=>u,g5:()=>g,jC:()=>r,lX:()=>p,nW:()=>h,oX:()=>_,qG:()=>x,tG:()=>t,yF:()=>i,yc:()=>c,yt:()=>d});let i=236,n=2*i/3,t=175,s=24,r=4,d=8,o=2,c=2,u=14,g=16,h=12,p=16,m=24,_=16,x=-1,y=(e=!1,a=!1)=>e?a?p:h:m,f=({contentVisibleItemCount:e,gap:a,width:l})=>e||l?(l-(e-1)*a)/e:i,b=(e,a,l,i,n=u)=>{let t=e+n,s=`
@media (min-width: ${a*t}px) and (max-width: ${(l+1)*t-1}px) {
  ${i}
}
`;return s},k=(e,a,l)=>{let n=l?3:2,s=a?5:n,r=a?i:t,o=a?_:d,c=r*s+o*s;if(!e)return c;for(let a=s;a>=2&&!(e>c);a-=1)c=r*a+o*a;return c}},361747:(e,a,l)=>{l.d(a,{Z:()=>s});var i=l(883119),n=l(140017),t=l(785893);function s({height:e,isDenseView:a,rounding:l,width:s,color:r}){let d=(0,n.ZP)();return(0,t.jsx)(i.xu,{alignItems:"center",color:r||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:l,width:s,children:(0,t.jsxs)(i.kC,{alignItems:"center",direction:"column",children:[(0,t.jsx)(i.xu,{paddingY:a?2:4,children:(0,t.jsx)(i.JO,{accessibilityLabel:d.bt("Pin not available", "Pin not available", "story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel", undefined, true),color:"default",icon:"alert",size:20})}),(0,t.jsx)(i.xv,{weight:"bold",children:d.bt("Unavailable", "Unavailable", "story-pin.Closeup.UnavailableIdeaPin.Unavailable", undefined, true)}),!a&&(0,t.jsx)(i.xu,{paddingY:1,children:(0,t.jsx)(i.xv,{children:d.bt("Removed by the creator", "Removed by the creator", "story-pin.Closeup.UnavailableIdeaPin.Removed", undefined, true)})})]})})}},325362:(e,a,l)=>{l.d(a,{Z:()=>i});function i(e){return e.replace(/[_.-](\w|$)/g,(e,a)=>a.toUpperCase())}},158838:(e,a,l)=>{l.d(a,{Q6:()=>n,ZP:()=>s,t2:()=>t});let i=()=>!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x",n=()=>{let e;let a="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,l=i();return a?"4g"===a?e="40-80":(l="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:l}};function t({vEXP3:e,vEXP4:a,vEXP5:l,vEXP6:i,vEXP7:t,v720P:s}){let{downloadSpeedGroup:r,screenDimension:d}=n(),o={"1x":e,"2x":l},c={"1x":t,"2x":t};return({unknown:o,"0-1":o,"1-5":{"1x":a,"2x":l},"5-10":{"1x":l,"2x":l},"10-20":{"1x":i,"2x":i},"20-40":c,"40-80":c,"80_or_above":c})[r][d]||s||void 0}function s(e){let{vHLSV3MOBILE:a,...l}=e,i=t(l),n=a||void 0;return i?{hlsv3:n,mp4:i}:{hlsv3:n}}},446653:(e,a,l)=>{l.d(a,{r:()=>b,K:()=>f});var i=l(667294),n=l(342513),t=l(340523),s=l(995917),r=l(149722),d=l(998577),o=l(573810),c=l(325362);let u=e=>{let a={};for(let l in e)Object.prototype.hasOwnProperty.call(e,l)&&("object"!=typeof e[l]||null===e[l]||Array.isArray(e[l])?a[(0,c.Z)(l)]=e[l]:a[(0,c.Z)(l)]=u(e[l]));return a},g=(e,a)=>{let l=[];for(let i in e)i!==a&&l.push({id:i,...u(e[i])});let i=l.sort(({user:{businessName:e}},{user:{businessName:a}})=>e.localeCompare(a)),n=new Map;for(let e of i)n.set(e.id,e);return n},h={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},p=(e,a)=>{switch(a.type){case"LOAD_PROFILES":return{...e,profiles:a.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:a.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:a.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:a.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:a.payload};default:return e}},m=({dispatch:e,isEnabled:a,state:l})=>{let{orbacVisibility:n,disableProfileChanger:t,headerVisible:s}=l,r=(0,i.useCallback)(l=>{a&&e({type:"SET_ACTIVE_PROFILE",payload:l})},[a,e]),d=(0,i.useCallback)(l=>{a&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:l??!n})},[a,e,n]),o=(0,i.useCallback)(l=>{a&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:l??!t})},[a,e,t]),c=(0,i.useCallback)(l=>{a&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:l??!s})},[a,e,s]);return{changeProfile:r,toggleORBACVisibility:d,toggleDisableProfileChanger:o,toggleHeaderVisibility:c}},_=e=>{let[a,l]=(0,i.useReducer)(p,h),n=m({dispatch:l,isEnabled:e,state:a}),{activeProfile:t,orbacVisibility:s}=a;(0,i.useEffect)(()=>{let e=(0,o.qn)("orbacActiveProfile",!1);e&&l({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,o.qn)("orbacVisibilty",!1);e&&l({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,o.Nh)("orbacVisibility",s)},[s]),(0,i.useEffect)(()=>{(0,o.Nh)("orbacActiveProfile",t)},[t]);let r=(0,i.useCallback)((e,a)=>{l({type:"LOAD_PROFILES",payload:g(e,a)})},[l]);return{state:a,actions:n,receiveProfiles:r}};var x=l(785893);let{Provider:y,useMaybeHook:f}=(0,n.Z)("RoleBasedAccessControlContext"),b=({children:e})=>{let a;let{checkExperiment:l}=(0,t.F)(),n=(0,r.Z)(),o=!!(n.isAuth&&n.isPartner&&l("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:u,receiveProfiles:g}=_(o),{activeProfile:h,headerVisible:p,profiles:m=[]}=c,f=m?Array.from(m.values()):[],b=(0,d.Z)(f),k=!!n.isAuth&&f.length>0&&b,P=n.isAuth?n.id:"",v=n.isAuth?n.username:"",{changeProfile:S,toggleORBACVisibility:j,toggleDisableProfileChanger:I,toggleHeaderVisibility:w}=u;(0,i.useEffect)(()=>{if(o){if("string"==typeof b){S(b);return}h||S(P)}},[b,P,o,S,h]),(0,i.useEffect)(()=>{o&&(k&&!p&&w(!0),!k&&p&&w(!1))},[w,k,o,p,m]);let{data:A}=(0,s.Z)(o?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),D=A?.profiles;n&&n.isAuth&&c.activeProfile===n.id?a={id:n.id,permissions:["OWNER"],user:{username:v,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:h&&c.profiles&&(a=c.profiles.get(h)),(0,i.useEffect)(()=>{D&&g(D,P)},[g,D,P]);let F=c.profiles?Array.from(c.profiles.values()):[];return(0,x.jsx)(y,{value:{profiles:F,headerVisible:c.headerVisible,activeProfile:a,changeProfile:S,toggleORBACVisibility:j,toggleDisableProfileChanger:I,toggleHeaderVisibility:w},children:e})}},785059:(e,a,l)=>{l.d(a,{Z:()=>s});var i=l(340523),n=l(446653),t=l(998577);let s=()=>{let{checkExperiment:e}=(0,i.F)(),a=(0,n.K)(),{activeProfile:l}=a||{},s=e("web_m10n_business_access_orbac_www").anyEnabled,r=(0,t.Z)(a?.profiles||[]),{anyEnabled:d}=e("useorbacroutematcher_in_useorbacactingas");return s&&(!d||r)&&l&&(l.viewerMeetsMfaRequirement||(l.permissions||[]).includes("OWNER"))?l:Object.freeze({})}},998577:(e,a,l)=>{l.d(a,{Z:()=>d});var i=l(616550),n=l(96157),t=l(340523),s=l(149722),r=l(19447);let d=e=>{let a=(0,i.TH)(),l=(0,s.Z)(),d=(0,r.S6)(),{anyEnabled:o}=(0,t.F)().checkExperiment("web_m10n_business_access_orbac_www"),c=(0,i.$B)("/:username"),u=c?.params?.username,g=(0,i.$B)("/pin/:id"),h=!!g?.params?.id&&d(g.params.id)?.pinner?.id;if((0,n.ej)(a))return!1;if((0,n.RU)(a))return!0;if((0,n.mY)(a))return o;let p=e.concat(l.isAuth?{user:{username:l.username},id:l.id}:{}).find(e=>{let{user:a={},id:l}=e||{},{username:i}=a;return(!!i&&!!u||!!h&&!!l)&&(i===u||h===l)});return!!p&&p.id}},199677:(e,a,l)=>{l.d(a,{D3:()=>o,DX:()=>r,KY:()=>c,Ms:()=>i,N1:()=>u,_P:()=>s,lJ:()=>t,nl:()=>n,q6:()=>d});let i=(e,a)=>{let l=e&&e.isAuth?e.username:"";return e&&a&&a.user&&a.user.username&&(l=a.user.username),l},n=(e,a)=>!!(a&&a.user&&e&&e.isAuth&&a.id!==e.id?a.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),t=(e,a)=>e&&e.isAuth&&a&&a.id&&a.id!==e.id?a.id:"",s=(e,a,l)=>l&&l.user&&a&&a.isAuth&&l.id!==a.id?l.user.merchantId:e.advertiser?.merchant_id,r=(e,a,l)=>l&&l.user&&e.isAuth&&l.id!==e.id?l.user.scheduledPinCount||0:e.isAuth&&a&&a.scheduled_pin_count||0,d=(e,a,l)=>{let i=e&&e.isAuth&&l&&l.id&&l.id!==e.id&&l.id===a;return!!i},o=(e,a,l)=>{let i=d(e,a,l)||e&&e.isAuth&&a===e.id;return!!i},c=(e,a,l)=>{let i=a&&a.owner&&a.owner.id||"";return o(e,i,l)};function u(e,a,l){let i=a?a.id:"";return o(e,i,l)}},156032:(e,a,l)=>{l.d(a,{Z:()=>j});var i,n=l(667294);l(167912);var t=l(616550),s=l(883119),r=l(510989),d=l(207012),o=l(343902),c=l(608516),u=l(477458),g=l(149722),h=l(785893);let p=({signal:e,anchor:a,setShowFlyout:l,setStore:i})=>{let{hovered:n,onMouseEnter:t,onMouseLeave:r}=(0,u.Z)(),d=e=>{l(e=>!e),i(e)};return(0,h.jsx)(s.iP,{onMouseEnter:t,onMouseLeave:r,onTap:()=>d(e),rounding:"pill",children:(0,h.jsxs)(s.xu,{ref:a,alignItems:"center",color:n?"dark":"transparentDarkGray",display:"flex",padding:3,rounding:"pill",children:[(0,h.jsx)(s.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",marginEnd:1,minWidth:24,rounding:"circle",children:(0,h.jsx)(s.xu,{height:20,overflow:"hidden",rounding:"circle",width:20,children:(0,h.jsx)(s.Ee,{alt:"",color:e.backgroundColor??"",naturalHeight:1,naturalWidth:1,src:e.iconUrl??""})})}),(0,h.jsx)(s.xv,{color:"inverse",size:"200",weight:"bold",children:e.signalMessage})]})})};var m=l(107366),_=l(140017),x=l(13848),y=l(454514);function f(e){let a=(0,_.ZP)(),{onHide:l}=e,i=(0,h.jsx)(s.xv,{children:a.bt("Thank you for helping improve signal detection on Pinterest.", "Thank you for helping improve signal detection on Pinterest!", "pinRep.actionBar.signalDetector.toast", undefined, true)});return(0,h.jsx)(y.ZP,{onHide:l,text:i})}let b=function({anchor:e,onDismiss:a,pinId:l,signal:i}){let n=(0,_.ZP)(),t=(0,g.Z)(),{showOneToast:r}=(0,x.F9)();if(!t.isEmployee)return null;let{backgroundColor:d,iconUrl:o,signalId:c,signalMessage:u}=i;return(0,h.jsx)(s.mh,{children:(0,h.jsx)(s.J2,{anchor:e,idealDirection:"right",onDismiss:a,positionRelativeToAnchor:!1,size:"lg",children:(0,h.jsxs)(s.xu,{padding:4,width:"100%",children:[(0,h.jsx)(s.kC,{alignItems:"center",justifyContent:"start",children:(0,h.jsx)(s.X6,{size:"400",children:n.bt("Signal detected:", "Signal detected:", "pinRep.actionBar.signalDetector.header", undefined, true)})}),(0,h.jsx)(s.xu,{paddingY:3,children:(0,h.jsxs)(s.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,h.jsx)(s.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:o?(0,h.jsx)(s.Ee,{alt:n.bt("Signal display", "Signal display", "pinRep.actionBar.signalDetector.signalAsset", undefined, true),color:"white",naturalHeight:1,naturalWidth:1,src:o}):(0,h.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:d??""}},height:40,width:40})}),(0,h.jsx)(s.xv,{size:"200",children:u})]})}),(0,h.jsx)(s.xu,{marginBottom:3,children:(0,h.jsx)(s.xv,{size:"200",children:n.bt("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "pinRep.actionBar.signalDetector.instructions", undefined, true)})}),(0,h.jsxs)(s.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,h.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{(0,m.Z)({url:`/v3/pins/${l}/signal_request_review/`,method:"POST",data:{signal_id:c,user:t.id}}),a(),r(({hideToast:e})=>(0,h.jsx)(f,{onHide:e}))},size:"md",text:n.bt("Send for review", "Send for review", "pinRep.actionBar.signalDetector.button.review", undefined, true)}),(0,h.jsx)(s.zx,{color:"gray",fullWidth:!0,onClick:a,size:"md",text:n.bt("Cancel", "Cancel", "pinRep.actionBar.signalDetector.button.cancel", undefined, true)})]})]})})})};function k({signals:e,pinId:a}){let[l,i]=(0,n.useState)(!1),t=(0,n.useRef)(null),[d,u]=(0,n.useState)(e[0]);return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(r.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(s.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(s.kC,{alignItems:"stretch",justifyContent:"start",children:e.map(e=>(0,h.jsx)(s.xu,{marginEnd:2,children:(0,h.jsx)(p,{anchor:t,setShowFlyout:i,setStore:u,signal:e})},e.signalId))})})})})}),l&&(0,h.jsx)(b,{anchor:t.current,onDismiss:()=>i(!1),pinId:a,signal:d})]})}let P=function({anchor:e,onDismiss:a,pinId:l,signals:i}){let t=(0,_.ZP)(),[r,d]=(0,n.useState)(0),o=(0,g.Z)(),{showOneToast:c}=(0,x.F9)();if(!o.isEmployee)return null;let u=i.map(({signalMessage:e})=>({href:"#",text:e??""})),{backgroundColor:p,iconUrl:y,signalId:b,signalMessage:k}=i[r],P=({activeTabIndex:e})=>{d(e)};return(0,h.jsx)(s.mh,{children:(0,h.jsx)(s.J2,{anchor:e,idealDirection:"right",onDismiss:a,positionRelativeToAnchor:!1,size:"lg",children:(0,h.jsxs)(s.xu,{padding:4,width:"100%",children:[i.length>1&&(0,h.jsx)(s.xu,{marginBottom:4,overflow:"scrollX",padding:1,children:(0,h.jsx)(s.mQ,{activeTabIndex:r,onChange:({event:e,activeTabIndex:a,dangerouslyDisableOnNavigation:l})=>{e.preventDefault(),l(),P({activeTabIndex:a})},tabs:u})}),(0,h.jsx)(s.kC,{alignItems:"center",justifyContent:"start",children:(0,h.jsx)(s.X6,{size:"400",children:t.bt("Signal detected:", "Signal detected:", "pinRep.actionBar.signalDetector.header", undefined, true)})}),(0,h.jsx)(s.xu,{paddingY:3,children:(0,h.jsxs)(s.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,h.jsx)(s.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:y?(0,h.jsx)(s.Ee,{alt:t.bt("Signal display", "Signal display", "pinRep.actionBar.signalDetector.signalAsset", undefined, true),color:"white",naturalHeight:1,naturalWidth:1,src:y}):(0,h.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:p??""}},height:40,width:40})}),(0,h.jsx)(s.xv,{size:"200",children:k})]})}),(0,h.jsx)(s.xu,{marginBottom:3,children:(0,h.jsx)(s.xv,{size:"200",children:t.bt("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "pinRep.actionBar.signalDetector.instructions", undefined, true)})}),(0,h.jsxs)(s.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,h.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{(0,m.Z)({url:`/v3/pins/${l}/signal_request_review/`,method:"POST",data:{signal_id:b,user:o.id}}),a(),c(({hideToast:e})=>(0,h.jsx)(f,{onHide:e}))},size:"md",text:t.bt("Send for review", "Send for review", "pinRep.actionBar.signalDetector.button.review", undefined, true)}),(0,h.jsx)(s.zx,{color:"gray",fullWidth:!0,onClick:a,size:"md",text:t.bt("Cancel", "Cancel", "pinRep.actionBar.signalDetector.button.cancel", undefined, true)})]})]})})})},v=void 0!==i?i:i=l(705533);function S({signals:e,pinId:a}){let{backgroundColor:l,iconUrl:i,signalMessage:t}=e[0],[d,g]=(0,n.useState)(!1),p=(0,n.useRef)();return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(r.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(s.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(u.q,{children:({hovered:e,onMouseEnter:a,onMouseLeave:n})=>(0,h.jsx)(s.iP,{onMouseEnter:a,onMouseLeave:n,onTap:()=>g(e=>!e),rounding:"pill",children:(0,h.jsxs)(s.xu,{ref:p,alignItems:"center",color:e?"dark":"transparentDarkGray",display:"flex",padding:3,rounding:"pill",children:[(0,h.jsx)(s.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",marginEnd:1,rounding:"circle",width:24,children:(0,h.jsx)(s.xu,{height:20,overflow:"hidden",rounding:"circle",width:20,children:(0,h.jsx)(s.Ee,{alt:"",color:l??"",naturalHeight:1,naturalWidth:1,src:i??""})})}),(0,h.jsx)(s.xv,{color:"inverse",size:"200",weight:"bold",children:t})]})})})})})})}),d&&p&&p.current&&(0,h.jsx)(P,{anchor:p.current,onDismiss:()=>g(!1),pinId:a,signals:e})]})}function j({pinKey:e}){let a=(0,d.Z)(v,e),l=(0,g.Z)(),{search:i}=(0,t.TH)(),s=(0,n.useMemo)(()=>new URLSearchParams(i),[i]);if(!l.isEmployee)return null;let{entityId:r,debAds:o,debContentQuality:c,debInclusiveProduct:u,debShopping:p,debTrustAndSafety:m}=a;if(o)return(0,h.jsx)(S,{pinId:r,signals:o});if(c)return(0,h.jsx)(S,{pinId:r,signals:c});if(u){if("skin_tone"===s.get("type")){let e=u.filter(e=>"visual_signals_hair_pattern_v1"!==e.signalId);return(0,h.jsx)(k,{pinId:r,signals:e})}{let e=u.filter(e=>"visual_body_analyses_v2_0"!==e.signalId);return(0,h.jsx)(k,{pinId:r,signals:e})}}return p?(0,h.jsx)(S,{pinId:r,signals:p}):m?(0,h.jsx)(S,{pinId:r,signals:m}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67614.en_GB-ae01967025def09b.mjs.map